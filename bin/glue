#!/usr/bin/env php
<?php
use Madewithlove\Glue\Configuration\Configuration;
use Madewithlove\Glue\Configuration\DefaultConfiguration;
use Madewithlove\Glue\Console\Commands\BootstrapCommand;
use Madewithlove\Glue\Console\Commands\TinkerCommand;
use Madewithlove\Glue\Console\SymfonyConsoleServiceProvider;
use Madewithlove\Glue\Glue;
use Madewithlove\Glue\Providers\FlysystemServiceProvider;
use Madewithlove\Glue\Utils;

require __DIR__.'/../src/Utils.php';

// Look for vendor folder, wherever it is
require Utils::find('vendor/autoload.php');

$glue = new Glue(new Configuration([
    'debug'     => true,
    'providers' => [
        FlysystemServiceProvider::class,
        SymfonyConsoleServiceProvider::class,
    ],
    'commands'  => [
        BootstrapCommand::class,
        TinkerCommand::class,
    ],
]));

$defaultConfiguration = (new DefaultConfiguration());
$glue->setPaths($defaultConfiguration->getPaths());
$glue->setDefinitionsProviders($defaultConfiguration->getDefinitionProviders());

$glue->console();
